



Selected = nuke.selectedNodes()

tmp = nuke.createNode('NoOp')
Excluded_Knobs = [ k for k in tmp.knobs().keys() if k not in ['disable'] ] 
nuke.delete( tmp )


for n in Selected:
	
	
	copy = nuke.createNode( n.Class() )
	copy.setXYpos( n.xpos() + 100 , n.ypos() + 20)
	
	for kname, knob in n.knobs().items():
		
		parent = nuke.thisParent()
		
		if not parent:
			parent = nuke.Root()

		
		target_knob = copy.knobs()[kname]
		
		print '%s.%s  %s' % ( n.name(), kname, target_knob.visible() ) 
				
		if kname not in Excluded_Knobs:
			
			expression = '%s.%s' % ( n.name(), kname)
			
			print expression
			
			target_knob.setExpression( expression )#
